-- Serviços
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Debris = game:GetService("Debris")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

--------------------------
-- EQUIPAR ITENS
--------------------------
local itemIDs = {13691517002,12350739537,13082402848,13172845397}

local function equipItem(id)
    local success, err = pcall(function()
        ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Wear"):InvokeServer(id)
    end)
    if success then
        print("Item "..id.." equipado!")
    else
        warn("Falha ao equipar "..id.." | "..tostring(err))
    end
end

for _,id in ipairs(itemIDs) do
    task.wait(0.4)
    equipItem(id)
end

--------------------------
-- SCRIPT XRl8
--------------------------
pcall(function() game.CoreGui:FindFirstChild("XRl8GUI"):Destroy() end)

local cam = workspace.CurrentCamera
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- Configurações
local speedMultiplier = 34
local isSpeedster = false
local effectsEnabled = true
local speedActive = false

-- Só azul
local colorScheme = {
    primary = Color3.fromRGB(0, 100, 255),
    secondary = Color3.fromRGB(100, 150, 255),
    border = Color3.fromRGB(0, 100, 255),
    name = "Azul"
}

-- Sons
local rumble = Instance.new("Sound", humanoidRootPart)
rumble.SoundId = "rbxassetid://1837635124"
rumble.Looped = true
rumble.Volume = 0.8

local zap = Instance.new("Sound", humanoidRootPart)
zap.SoundId = "rbxassetid://138218317"
zap.Volume = 0.6

-- Partículas elétricas
local function createLightningEffect()
    local effect = Instance.new("ParticleEmitter")
    effect.Texture = "rbxassetid://255449862"
    effect.Lifetime = NumberRange.new(0.2, 0.5)
    effect.Rate = 19
    effect.Speed = NumberRange.new(10, 20)
    effect.Parent = humanoidRootPart
    effect.Enabled = false
    return effect
end
local lightningParticles = createLightningEffect()

local electricTrails = {}

local function lightningTrail()
    if not effectsEnabled or not speedActive then return end
    
    local a0 = Instance.new("Attachment", humanoidRootPart)
    local a1 = Instance.new("Attachment", humanoidRootPart)
    a0.Position = Vector3.new(0, 2, 0)
    a1.Position = Vector3.new(0, -2, 0)

    local trail = Instance.new("Trail", humanoidRootPart)  
    trail.Attachment0 = a0  
    trail.Attachment1 = a1  
    trail.Color = ColorSequence.new(colorScheme.primary)
    trail.Lifetime = 0.4  
    trail.WidthScale = NumberSequence.new({  
        NumberSequenceKeypoint.new(0, 1.5),   
        NumberSequenceKeypoint.new(1, 0)  
    })  
    trail.Transparency = NumberSequence.new(0.1)  
    trail.LightEmission = 1  

    Debris:AddItem(trail, 1.2)  
    Debris:AddItem(a0, 1.2)  
    Debris:AddItem(a1, 1.2)
end

local function createElectricTrails()
    if not effectsEnabled then return end
    local parts = {
        character:FindFirstChild("Head"),
        character:FindFirstChild("Left Arm") or character:FindFirstChild("LeftUpperArm"),
        character:FindFirstChild("Right Arm") or character:FindFirstChild("RightUpperArm"),
        character:FindFirstChild("Left Leg") or character:FindFirstChild("LeftUpperLeg"),
        character:FindFirstChild("Right Leg") or character:FindFirstChild("RightUpperLeg"),
        humanoidRootPart
    }
    for _, part in ipairs(parts) do
        if part then
            local att0 = Instance.new("Attachment", part)
            local att1 = Instance.new("Attachment", part)
            att0.Position = Vector3.new(0, 0.5, 0)
            att1.Position = att0.Position + Vector3.new(0, -0.3, 0)

            local trail = Instance.new("Trail", part)
            trail.Attachment0 = att0
            trail.Attachment1 = att1
            trail.Color = ColorSequence.new(colorScheme.secondary)
            trail.Lifetime = 0.3
            trail.Transparency = NumberSequence.new(0.2)
            trail.WidthScale = NumberSequence.new(0.4)
            trail.LightEmission = 1

            table.insert(electricTrails, trail)
            table.insert(electricTrails, att0)
            table.insert(electricTrails, att1)
        end
    end
end

local function destroyElectricTrails()
    for _, obj in pairs(electricTrails) do
        if obj and obj.Parent then obj:Destroy() end
    end
    electricTrails = {}
end

-- Movimento rápido
RunService.RenderStepped:Connect(function()
    if speedActive and isSpeedster then
        local moveDirection = humanoid.MoveDirection
        if moveDirection.Magnitude > 0 then
            humanoidRootPart.CFrame = humanoidRootPart.CFrame + (moveDirection * speedMultiplier)
            if effectsEnabled and math.random() < 0.3 then lightningTrail() end
            if zap and not zap.IsPlaying and math.random() < 0.1 then zap:Play() end
        end
    end
end)

local function toggleSpeedster()
    isSpeedster = not isSpeedster
    if isSpeedster then
        rumble:Play()
        TweenService:Create(cam, TweenInfo.new(0.3), {FieldOfView = 90}):Play()
        if effectsEnabled then createElectricTrails() end
        if speedActive then lightningParticles.Enabled = true end
    else
        rumble:Stop()
        TweenService:Create(cam, TweenInfo.new(0.3), {FieldOfView = 70}):Play()
        destroyElectricTrails()
        lightningParticles.Enabled = false
    end
end

local function toggleSpeed()
    speedActive = not speedActive
    lightningParticles.Enabled = (speedActive and isSpeedster)
end

--------------------------
-- GUI
--------------------------
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "XRl8GUI"
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 280, 0, 200)
mainFrame.Position = UDim2.new(0, 20, 1, -220)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = colorScheme.border
mainFrame.Active = true
mainFrame.Draggable = true

local title = Instance.new("TextLabel", mainFrame)
title.Size = UDim2.new(1, -30, 0, 28)
title.BackgroundColor3 = colorScheme.primary
title.Text = "⚡ XRl8 ⚡"
title.TextColor3 = Color3.new(1,1,1)
title.Font = Enum.Font.SourceSansBold
title.TextScaled = true
title.BorderSizePixel = 0

local closeBtn = Instance.new("TextButton", mainFrame)
closeBtn.Size = UDim2.new(0, 28, 0, 28)
closeBtn.Position = UDim2.new(1, -28, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(200,0,0)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(1,1,1)
closeBtn.TextScaled = true
closeBtn.MouseButton1Click:Connect(function() gui:Destroy() end)

local flashBtn = Instance.new("TextButton", mainFrame)
flashBtn.Size = UDim2.new(0.95, 0, 0, 32)
flashBtn.Position = UDim2.new(0.025, 0, 0, 40)
flashBtn.BackgroundColor3 = colorScheme.primary
flashBtn.Text = "XRl8: OFF"
flashBtn.TextColor3 = Color3.new(1,1,1)
flashBtn.Font = Enum.Font.SourceSansBold
flashBtn.TextSize = 14
flashBtn.MouseButton1Click:Connect(function()
    toggleSpeedster()
    if isSpeedster then
        flashBtn.Text = "XRl8: ON"
        flashBtn.BackgroundColor3 = Color3.fromRGB(0,200,0)
    else
        flashBtn.Text = "XRl8: OFF"
        flashBtn.BackgroundColor3 = colorScheme.primary
    end
end)

local speedBtn = Instance.new("TextButton", mainFrame)
speedBtn.Size = UDim2.new(0.6, 0, 0, 28)
speedBtn.Position = UDim2.new(0.025, 0, 0, 80)
speedBtn.BackgroundColor3 = colorScheme.primary
speedBtn.Text = "Velocidade: OFF"
speedBtn.TextColor3 = Color3.new(1,1,1)
speedBtn.TextSize = 12
speedBtn.Font = Enum.Font.SourceSans
speedBtn.MouseButton1Click:Connect(function()
    toggleSpeed()
    if speedActive then
        speedBtn.Text = "Velocidade: ON"
        speedBtn.BackgroundColor3 = Color3.fromRGB(0,170,0)
    else
        speedBtn.Text = "Velocidade: OFF"
        speedBtn.BackgroundColor3 = colorScheme.primary
    end
end)

local speedInput = Instance.new("TextBox", mainFrame)
speedInput.Size = UDim2.new(0.35, 0, 0, 28)
speedInput.Position = UDim2.new(0.63, 0, 0, 80)
speedInput.BackgroundColor3 = Color3.fromRGB(255,255,255)
speedInput.Text = tostring(speedMultiplier)
speedInput.TextSize = 12
speedInput.TextColor3 = Color3.new(0,0,0)
speedInput.Font = Enum.Font.SourceSans
speedInput.FocusLost:Connect(function()
    local newSpeed = tonumber(speedInput.Text)
    if newSpeed then
        speedMultiplier = newSpeed
        speedInput.Text = tostring(newSpeed)
    else
        speedInput.Text = tostring(speedMultiplier)
    end
end)

local effectBtn = Instance.new("TextButton", mainFrame)
effectBtn.Size = UDim2.new(0.95, 0, 0, 28)
effectBtn.Position = UDim2.new(0.025, 0, 0, 120)
effectBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
effectBtn.Text = "Efeitos: ON"
effectBtn.TextSize = 12
effectBtn.Font = Enum.Font.SourceSans
effectBtn.TextColor3 = Color3.new(1,1,1)
effectBtn.MouseButton1Click:Connect(function()
    effectsEnabled = not effectsEnabled
    if effectsEnabled then
        effectBtn.Text = "Efeitos: ON"
        effectBtn.BackgroundColor3 = Color3.fromRGB(0,150,0)
        if isSpeedster then createElectricTrails() end
    else
        effectBtn.Text = "Efeitos: OFF"
        effectBtn.BackgroundColor3 = Color3.fromRGB(100,100,100)
        destroyElectricTrails()
    end
end)
